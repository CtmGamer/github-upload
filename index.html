<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>New webpage</title>

        <style>
            body {
                margin: 0;
            }
            canvas {
                display: block;
                position: fixed;
                top: 0px;
                left: 0px;
                width: 100vw;
                height: 100vh;
            }
        </style>
    </head>
    <body>
        <image src="./businessman.jpg"></image>
        <!-- <canvas id="c"></canvas> -->
    
    <!-- <script id="vertex-shader-2d" type="notjs">
        attribute vec2 a_position;
        attribute vec2 a_texCoord;

        uniform vec2 u_resolution;

        varying vec2 v_texCoord;
        
        void main() {
            vec2 zeroToOne = a_position / u_resolution;
            vec2 zeroToTwo = zeroToOne * 2.0;
            vec2 clipSpace = zeroToTwo - 1.0;

            gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
            v_texCoord = a_texCoord;
        }
    </script>
    <script id="fragment-shader-2d" type="notjs">
        precision mediump float;
 
        uniform sampler2D u_image;
        
        varying vec2 v_texCoord;
        
        void main() {
            gl_FragColor = texture2D(u_image, v_texCoord);
        }
    </script>
    <script>
        function createShader(gl, type, source) {
            var shader = gl.createShader(type);
            gl.shaderSource(shader, source);
            gl.compileShader(shader);
            var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
            if (success) {
                return shader;
            }

            console.log(gl.getShaderInfoLog(shader));
            gl.deleteShader(shader);
        }
        function createProgram(gl, vertexShader, fragmentShader) {
            var program = gl.createProgram();
            gl.attachShader(program, vertexShader);
            gl.attachShader(program, fragmentShader);
            gl.linkProgram(program);
            var success = gl.getProgramParameter(program, gl.LINK_STATUS);
            if (success) {
                return program;
            }

            console.log(gl.getProgramInfoLog(program));
            gl.deleteProgram(program);
        }
        
        function main() {
            var deimage = new Image();
            deimage.src = "data:image/jpeg;base64,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";  // MUST BE SAME DOMAIN!!!
            deimage.onload = function() {
                render(deimage);
            };
        }

        function render(deimage) {
            var canvas = document.querySelector("#c");
            var gl = canvas.getContext("webgl");
            if (!gl) {
                alert("Loser! You dont have WebGL");
                return;
            }
            alert(document.querySelector("#deFunc").text);

            var vertexShader = createShader(gl, gl.VERTEX_SHADER, document.querySelector("#vertex-shader-2d").text);
            var fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, document.querySelector("#fragment-shader-2d").text);

            var program = createProgram(gl, vertexShader, fragmentShader);
            
            var positionLocation = gl.getAttribLocation(program, "a_position");
            var texCoordLocation = gl.getAttribLocation(program, "a_texCoord");
            var resolutionUniformLocation = gl.getUniformLocation(program, "u_resolution");

            // create buffer
            var positionBuffer = gl.createBuffer();
            var x = 100, y = 100, w = deimage.width, h = deimage.height;
            gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
                x,   y,
                x+w, y,
                x,   y+h,
                x,   y+h,
                x+w, y,
                x+w, y+h
            ]), gl.STATIC_DRAW);

            var texCoordBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
                0.0, 0.0,
                1.0, 0.0,
                0.0, 1.0,
                0.0, 1.0,
                1.0, 0.0,
                1.0, 1.0
            ]), gl.STATIC_DRAW);

            // create texture
            var texture = gl.createTexture();
            gl.bindTexture(gl.TEXTURE_2D, texture);

            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, deimage);
            
            // end initializtion
            canvas.width  = canvas.clientWidth;
            canvas.height  = canvas.clientHeight;
            gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
            gl.clearColor(0, 0, 0, 0);
            gl.clear(gl.COLOR_BUFFER_BIT);

            gl.useProgram(program);
            
            gl.enableVertexAttribArray(positionLocation);
            gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
            gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

            gl.enableVertexAttribArray(texCoordLocation);
            gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);
            gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);

            gl.uniform2f(resolutionUniformLocation, gl.canvas.width, gl.canvas.height);

            gl.drawArrays(gl.TRIANGLES, 0, 6);
        }

        main();
        
    </script> -->
    </body>
</html>
